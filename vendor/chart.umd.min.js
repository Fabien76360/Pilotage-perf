(function(global){"use strict";function drawLine(ctx,config){var labels=config.data.labels||[];var datasets=config.data.datasets||[];var width=ctx.canvas.width;var height=ctx.canvas.height;ctx.clearRect(0,0,width,height);ctx.save();ctx.fillStyle="rgba(15,23,42,0.1)";ctx.fillRect(0,0,width,height);ctx.restore();if(labels.length===0||datasets.length===0){return;}var padding=40;var plotW=width-padding*2;var plotH=height-padding*2;var max=Math.max.apply(null,datasets.flatMap(function(ds){return ds.data||[];}));var min=Math.min.apply(null,datasets.flatMap(function(ds){return ds.data||[];}));if(!isFinite(max)||max===min){max=min+1;}ctx.strokeStyle="rgba(100,116,139,0.4)";ctx.lineWidth=1;ctx.beginPath();ctx.rect(padding,padding,plotW,plotH);ctx.stroke();for(var i=0;i<labels.length;i++){var x=padding+(plotW*(i/(labels.length-1||1)));ctx.beginPath();ctx.moveTo(x,padding+plotH);ctx.lineTo(x,padding+plotH+6);ctx.stroke();ctx.fillStyle="rgba(148,163,184,0.8)";ctx.textAlign="center";ctx.font="12px 'Segoe UI',sans-serif";ctx.fillText(labels[i],x,padding+plotH+18);}datasets.forEach(function(ds){ctx.strokeStyle=ds.borderColor||"#38bdf8";ctx.fillStyle=ds.backgroundColor||"rgba(56,189,248,0.25)";ctx.lineWidth=2;ctx.beginPath();ds.data.forEach(function(val,idx){var ratio=(val-min)/(max-min);var x=padding+(plotW*(idx/(labels.length-1||1)));var y=padding+plotH-(plotH*ratio);if(idx===0){ctx.moveTo(x,y);}else{ctx.lineTo(x,y);}});ctx.stroke();if(ds.fill){ctx.lineTo(padding+plotW,padding+plotH);ctx.lineTo(padding,padding+plotH);ctx.closePath();ctx.globalAlpha=0.3;ctx.fill();ctx.globalAlpha=1;}ds.data.forEach(function(val,idx){var ratio=(val-min)/(max-min);var x=padding+(plotW*(idx/(labels.length-1||1)));var y=padding+plotH-(plotH*ratio);ctx.beginPath();ctx.arc(x,y,4,0,Math.PI*2);ctx.fillStyle=ds.borderColor||"#38bdf8";ctx.fill();});});}
function drawBar(ctx,config){var labels=config.data.labels||[];var datasets=config.data.datasets||[];var width=ctx.canvas.width;var height=ctx.canvas.height;ctx.clearRect(0,0,width,height);ctx.fillStyle="rgba(15,23,42,0.1)";ctx.fillRect(0,0,width,height);if(labels.length===0||datasets.length===0){return;}var padding=40;var plotW=width-padding*2;var plotH=height-padding*2;var data=datasets[0].data||[];var max=Math.max.apply(null,data);if(!isFinite(max)||max===0){max=1;}var barWidth=plotW/Math.max(data.length,1)*0.6;for(var i=0;i<data.length;i++){var val=data[i];var ratio=val/max;var barH=plotH*ratio;var x=padding+(plotW*(i/(data.length)))-barWidth/2+plotW/(data.length*2);var y=padding+plotH-barH;ctx.fillStyle=(datasets[0].backgroundColor&&datasets[0].backgroundColor[i])||"#38bdf8";ctx.fillRect(x,y,barWidth,barH);ctx.fillStyle="rgba(148,163,184,0.85)";ctx.textAlign="center";ctx.font="12px 'Segoe UI',sans-serif";ctx.fillText(labels[i],x+barWidth/2,height-12);ctx.fillText(String(Math.round(val)),x+barWidth/2,y-6);} }
function drawDoughnut(ctx,config){var data=(config.data.datasets&&config.data.datasets[0])||{};var values=data.data||[];var colors=data.backgroundColor||[];var labels=config.data.labels||[];var width=ctx.canvas.width;var height=ctx.canvas.height;ctx.clearRect(0,0,width,height);var total=values.reduce(function(sum,v){return sum+v;},0);var radius=Math.min(width,height)/2-20;var centerX=width/2;var centerY=height/2;var startAngle=-Math.PI/2;values.forEach(function(val,idx){var angle=total? (val/total)*Math.PI*2:0;ctx.beginPath();ctx.moveTo(centerX,centerY);ctx.fillStyle=colors[idx]||"#38bdf8";ctx.arc(centerX,centerY,radius,startAngle,startAngle+angle);ctx.closePath();ctx.fill();startAngle+=angle;});ctx.fillStyle="rgba(226,232,240,0.9)";ctx.textAlign="center";ctx.font="14px 'Segoe UI',sans-serif";labels.forEach(function(label,idx){var val=values[idx];if(val<=0){return;}ctx.fillText(label+" ("+Math.round(total?val/total*100:0)+"%)",centerX,centerY+radius+18*(idx+1));});}
function resizeCanvas(canvas){var ratio=window.devicePixelRatio||1;if(canvas.__chartRatio===ratio)return;canvas.__chartRatio=ratio;canvas.width=canvas.clientWidth*ratio;canvas.height=canvas.clientHeight*ratio;}
function SimpleChart(ctx,config){this.ctx=typeof ctx.getContext==="function"?ctx:ctx.getContext("2d");this.canvas=this.ctx.canvas;this.config=config;resizeCanvas(this.canvas);this.draw();var self=this;this.resizeHandler=function(){resizeCanvas(self.canvas);self.draw();};window.addEventListener("resize",this.resizeHandler);}SimpleChart.prototype.update=function(newConfig){if(newConfig){this.config.data=newConfig.data||this.config.data;this.config.options=newConfig.options||this.config.options;}this.draw();};SimpleChart.prototype.draw=function(){var type=this.config.type;var ctx=this.ctx;if(type==="line"){drawLine(ctx,this.config);}else if(type==="bar"){drawBar(ctx,this.config);}else if(type==="doughnut"||type==="pie"){drawDoughnut(ctx,this.config);}else{ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);}};SimpleChart.prototype.destroy=function(){window.removeEventListener("resize",this.resizeHandler);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);};global.Chart=SimpleChart;})(typeof window!=="undefined"?window:globalThis);
